@model Lombiq.HelpfulExtensions.Extensions.CodeGeneration.ContentTypeMigrationsViewModel

<script asp-name="codemirror" depends-on="admin" at="Foot"></script>
<script asp-name="codemirror-mode-javascript" at="Foot"></script>

<h3>Migration code</h3>
<div class="form-group">
    <button class="btn btn-info collapse-toggle" type="button" data-bs-toggle="collapse" href="#generated-migration-code-container">
        Show Migration Code
    </button>
    <div id="generated-migration-code-container" class="collapse">
        <textarea id="generated-migration-code" type="text" class="form-control">@Model.MigrationCode</textarea>
    </div>
</div>
<br />

<div class="form-group">
    <button class="btn btn-info collapse-toggle" type="button" data-bs-toggle="collapse" href="#generated-model-code-container">
        Show Model Code
    </button>
    <div id="generated-model-code-container" class="collapse">
        <textarea id="generated-model-code" type="text" class="form-control">@Model.ModelCode</textarea>
    </div>
</div>

<br />

<script at="Foot">
    window.addEventListener('load', function () {
          CodeMirror.fromTextArea(document.getElementById('generated-migration-code'), {
              autoRefresh: true,
              lineNumbers: true,
              matchBrackets: true,
      @* It's not JavaScript but close enough. This way we don't need to include another CodeMirror add-on. *@
              mode: { name: "javascript" },
              readOnly: true
      });
      CodeMirror.fromTextArea(document.getElementById('generated-model-code'), {
          autoRefresh: true,
          lineNumbers: true,
          matchBrackets: true,
          mode: { name: "javascript" },
          readOnly: true
      });
    });
</script>
